ARM GAS  /tmp/ccJ9scDE.s 			page 1


   1              	# 1 "svc_handler.s"
   1              	    /* SVC_Handler code adapted from ARM docs.
   0              	
   0              	
   1              	/* Copyright (C) 1991-2014 Free Software Foundation, Inc.
   2              	     * Determine what mode we're in, and load the appropriate stack to r7.
   3              	     * Then, load the svc number, which is stored on the stack.
   4              	     * Finally, use this as an index into SysCall_Table for dispatch.
   5              	     */
   6              	    .global SVC_Handler
   7              	    .func SVC_Handler
   8              	SVC_Handler:
   9 0000 7746     	    mov r7, lr
  10 0002 0426     	    mov r6, #4
  11 0004 3742     	    tst r7, r6
  12 0006 00D0     	    beq svc_handler_msp
  13 0008 02D1     	    bne svc_handler_psp
  14              	svc_handler_msp:
  15 000a EFF30887 	    mrs r7, MSP
  16 000e 02E0     	    b svc_handler_dispatch
  17              	svc_handler_psp:
  18 0010 EFF30987 	    mrs r7, PSP
  19 0014 FFE7     	    b svc_handler_dispatch
  20              	svc_handler_dispatch:
  21 0016 1826     	    mov     r6, #6*4
  22 0018 BF59     	    ldr     r7, [r7, r6]
  23 001a 0026     	    mov     r6, #0
  24 001c 023E     	    sub     r6, #2
  25 001e BF5D     	    ldrb    r7, [r7, r6]
  26              	    //svc_number = ((char *)svc_args[6])[-2];
  27 0020 024E     	    ldr     r6, =SysCall_Table
  28 0022 BF00     	    lsl     r7, #2
  29 0024 BE19     	    add     r6, r7, r6
  30 0026 3668     	    ldr     r6, [r6]
  31 0028 3047     	    bx      r6
  32              	    .endfunc
  33              	    .type SVC_Handler, %function
  34 002a 00000000 	    .size SVC_Handler, .-SVC_Handler
  34      0000
ARM GAS  /tmp/ccJ9scDE.s 			page 2


DEFINED SYMBOLS
       svc_handler.s:8      .text:00000000 SVC_Handler
       svc_handler.s:9      .text:00000000 $t
       svc_handler.s:14     .text:0000000a svc_handler_msp
       svc_handler.s:17     .text:00000010 svc_handler_psp
       svc_handler.s:20     .text:00000016 svc_handler_dispatch
       svc_handler.s:34     .text:0000002a $d
       svc_handler.s:34     .text:0000002c $d

UNDEFINED SYMBOLS
SysCall_Table
